<databaseChangeLog
        xmlns="http://www.liquibase.org/xml/ns/dbchangelog"
        xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
        xsi:schemaLocation="http://www.liquibase.org/xml/ns/dbchangelog http://www.liquibase.org/xml/ns/dbchangelog/dbchangelog-4.3.xsd">

    <changeSet id="acc-73" author="vzotov">
        <addColumn tableName="DEAL_">
            <column name="OWNER" type="VARCHAR(255)" value="f3a9fa7e-36de-4a9f-b471-8369269aab36">
                <constraints nullable="false" foreignKeyName="FK_DEAL_OWNER" references="PERSON_(PERSON_UID)"/>
            </column>
        </addColumn>
    </changeSet>

    <changeSet id="acc-74" author="vzotov">
        <addColumn tableName="QR_CODE">
            <column name="OWNER" type="VARCHAR(255)" value="f3a9fa7e-36de-4a9f-b471-8369269aab36">
                <constraints nullable="false" foreignKeyName="FK_QR_OWNER" references="PERSON_(PERSON_UID)"/>
            </column>
        </addColumn>
    </changeSet>

    <changeSet id="acc-75" author="vzotov">
        <addColumn tableName="BUDGET">
            <column name="OWNER" type="VARCHAR(255)" value="f3a9fa7e-36de-4a9f-b471-8369269aab36">
                <constraints nullable="false" foreignKeyName="FK_BUDGET_OWNER" references="PERSON_(PERSON_UID)"/>
            </column>
        </addColumn>
    </changeSet>

    <changeSet id="acc-76" author="vzotov">
        <addColumn tableName="CARD_">
            <column name="OWNER" type="VARCHAR(255)" value="f3a9fa7e-36de-4a9f-b471-8369269aab36">
                <constraints nullable="false" foreignKeyName="FK_CARD_OWNER" references="PERSON_(PERSON_UID)"/>
            </column>
        </addColumn>
    </changeSet>

    <changeSet id="acc-77" author="vzotov">
        <addColumn tableName="BUDGET_CATEGORY_">
            <column name="OWNER" type="VARCHAR(255)" value="f3a9fa7e-36de-4a9f-b471-8369269aab36">
                <constraints nullable="false" foreignKeyName="FK_BC_OWNER" references="PERSON_(PERSON_UID)"/>
            </column>
        </addColumn>
        <sql dbms="mysql">ALTER TABLE BUDGET_CATEGORY_ DROP INDEX `NAME`</sql>

        <sql dbms="h2">
            ALTER TABLE BUDGET_CATEGORY_ DROP INDEX CONSTRAINT_B;
       </sql>

        <addUniqueConstraint tableName="BUDGET_CATEGORY_" columnNames="NAME, OWNER" constraintName="UNQ_BC_NAME"/>
    </changeSet>

    <changeSet id="acc-78" author="vzotov">
        <addColumn tableName="PURCHASE_CATEGORY">
            <column name="OWNER" type="VARCHAR(255)" value="f3a9fa7e-36de-4a9f-b471-8369269aab36">
                <constraints nullable="false" foreignKeyName="FK_PC_OWNER" references="PERSON_(PERSON_UID)"/>
            </column>
        </addColumn>
        <sql dbms="mysql">ALTER TABLE PURCHASE_CATEGORY DROP INDEX `NAME`</sql>

        <sql dbms="h2">
            ALTER TABLE PURCHASE_CATEGORY DROP INDEX CONSTRAINT_C;
        </sql>

        <addUniqueConstraint tableName="PURCHASE_CATEGORY" columnNames="NAME, OWNER" constraintName="UNQ_PC_NAME"/>
    </changeSet>

    <changeSet id="acc-79" author="vzotov">
        <addColumn tableName="CHECK_">
            <column name="OWNER" type="VARCHAR(255)" value="f3a9fa7e-36de-4a9f-b471-8369269aab36">
                <constraints nullable="false" foreignKeyName="FK_RECEIPT_OWNER" references="PERSON_(PERSON_UID)"/>
            </column>
        </addColumn>
    </changeSet>

    <changeSet id="acc-80" author="vzotov">
        <addColumn tableName="PURCHASE_">
            <column name="OWNER" type="VARCHAR(255)" value="f3a9fa7e-36de-4a9f-b471-8369269aab36">
                <constraints nullable="false" foreignKeyName="FK_PURCHASE_OWNER" references="PERSON_(PERSON_UID)"/>
            </column>
        </addColumn>
    </changeSet>

</databaseChangeLog>
